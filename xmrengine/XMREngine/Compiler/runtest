#!/bin/bash -v
set -e
time make xmrengtest.exe
export MONO_PATH=../../../bin
export PATH=~/mono64.267/bin:$PATH

mono --debug xmrengtest.exe -serialize -asm while1.xmrasm       while1.lsl       2>&1 | tee while1.out
diff while1.out while1.good
mono --debug xmrengtest.exe -serialize -asm arraytest.xmrasm    arraytest.lsl    2>&1 | tee arraytest.out
diff arraytest.out arraytest.good
mono --debug xmrengtest.exe -serialize -asm objectest.xmrasm    objectest.lsl    2>&1 | tee objectest.out
diff objectest.out objectest.good
mono --debug xmrengtest.exe -serialize -asm chartest.xmrasm     chartest.lsl     2>&1 | tee chartest.out
diff chartest.out chartest.good
mono --debug xmrengtest.exe -serialize -asm trycatchtest.xmrasm trycatchtest.lsl 2>&1 | tee trycatchtest.out
diff trycatchtest.out trycatchtest.good
mono --debug xmrengtest.exe -serialize -asm proptest.xmrasm     proptest.lsl     2>&1 | tee proptest.out
diff proptest.out proptest.good

echo "SUCCESS"
